# üéØ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üö® –ü—Ä–æ–±–ª–µ–º–∞
–°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ "Telegram User" –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram.

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ initDataUnsafe.user**
```javascript
if (window.Telegram?.WebApp?.initDataUnsafe?.user) {
    const telegramUser = window.Telegram.WebApp.initDataUnsafe.user;
    const user = {
        id: telegramUser.id,
        first_name: telegramUser.first_name,
        last_name: telegramUser.last_name || '',
        username: telegramUser.username || '',
        photo_url: telegramUser.photo_url || '',
        role: "student",
        group_id: this.getGroupIdFromUrl()
    };
}
```

### 2. **–î–æ–±–∞–≤–ª–µ–Ω fallback –¥–ª—è initDataUnsafe –ø–æ–ª–µ–π**
```javascript
else if (window.Telegram?.WebApp?.initDataUnsafe) {
    const initDataUnsafe = window.Telegram.WebApp.initDataUnsafe;
    if (initDataUnsafe.user_id || initDataUnsafe.first_name) {
        const user = {
            id: initDataUnsafe.user_id || Date.now(),
            first_name: initDataUnsafe.first_name || "Telegram",
            last_name: initDataUnsafe.last_name || "User",
            username: initDataUnsafe.username || "",
            photo_url: initDataUnsafe.photo_url || "",
            role: "student",
            group_id: this.getGroupIdFromUrl()
        };
    }
}
```

### 3. **–£–ª—É—á—à–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞**
```javascript
console.log('initDataUnsafe:', window.Telegram?.WebApp?.initDataUnsafe);
console.log('initDataUnsafe.user:', window.Telegram?.WebApp?.initDataUnsafe?.user);
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞**
–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```
authenticateWithTelegram –≤—ã–∑–≤–∞–Ω–∞
initDataUnsafe: {user: {id: 123456789, first_name: "–ò–≤–∞–Ω", ...}}
initDataUnsafe.user: {id: 123456789, first_name: "–ò–≤–∞–Ω", ...}
–ù–∞–π–¥–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ initDataUnsafe: {id: 123456789, first_name: "–ò–≤–∞–Ω", ...}
–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, –ò–≤–∞–Ω!
```

### **–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**
2. –î–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è:
   - **–ò–º—è**: –†–µ–∞–ª—å–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ò–≤–∞–Ω")
   - **–†–æ–ª—å**: –°—Ç—É–¥–µ–Ω—Ç
   - **ID**: –†–µ–∞–ª—å–Ω—ã–π ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### **–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: **"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, [–†–µ–∞–ª—å–Ω–æ–µ –∏–º—è]!"**

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### **–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ initDataUnsafe.user:**
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, [–ò–º—è]!"

### **–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ initDataUnsafe –ø–æ–ª–µ–π:**
- ‚úÖ –ò–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### **–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "Telegram User"
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, Telegram! (–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º)"

## üîß –û—Ç–ª–∞–¥–∫–∞

### **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
console.log('Telegram WebApp:', window.Telegram?.WebApp);
console.log('initData:', window.Telegram?.WebApp?.initData);
console.log('initDataUnsafe:', window.Telegram?.WebApp?.initDataUnsafe);
console.log('initDataUnsafe.user:', window.Telegram?.WebApp?.initDataUnsafe?.user);
```

### **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```javascript
console.log('currentUser:', authManager.currentUser);
console.log('permissions:', authManager.permissions);
```

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞:
- ‚úÖ **–ò–∑–≤–ª–µ–∫–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –∏–∑ Telegram WebApp
- ‚úÖ **–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–µ–µ –∏–º—è** –≤–º–µ—Å—Ç–æ "Telegram User"
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π ID** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **–ó–∞–≥—Ä—É–∂–∞—Ç—å –∞–≤–∞—Ç–∞—Ä** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** —Å —Ä–µ–∞–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º

## üìà –£—Ä–æ–≤–Ω–∏ fallback

1. **initDataUnsafe.user** - –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **initDataUnsafe –ø–æ–ª—è** - –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** - –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram! üéâ

